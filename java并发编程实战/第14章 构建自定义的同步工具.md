# 构建自定义的同步工具

## 状态依赖性的管理

生产者-消费者模型中经常使用ArrayBlockingQueue这样的有界缓存，有界缓存提供的put和take操作中都包含一个前提条件，不能从空缓存中获取元素，而不能将元素放入已满的缓存中。

当依赖状态的操作可以抛出一个异常或返回一个错误状态，也可以保持阻塞直到对象进入正确的状态。

**有界缓存的集中实现方式**

### 将前提条件的失败传递给调用者

调用者可以不进入休眠状态，而是直接调用take方法，这种方式被称为忙等待或自旋等待。这种方法会消耗大量的CPU时间。

### 通过轮询和休眠来实现简单的阻塞

### 条件队列

条件队列使得一组线程能够通过某种方式来等待特定的条件变为真。传统队列的元素是一个个元素，而与之不同的是，条件队列中的元素是一个个正在等待相关条件的线程。

每个对象都可以作为一个条件队列，并且Object中的wait、notify和notifyAll方法就构成了内部条件队列的API。

## 使用条件队列


