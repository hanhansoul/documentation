# 基础

## 并发编程模型的分类

并发编程两个关键问题：
1. 线程之间如何通信
2. 线程之间如何同步

线程之间的通信机制：
1. 共享内存：通过读写内存中的公共状态进行通信；
2. 消息传递：通过明确的发送消息来显式进行通信。

java并发采用共享内存模型。

## java内存模型的抽象

实例域、静态域和数组元素存储在堆内存中，堆内存在线程之间共享。

局部变量、方法定义参数、异常处理器参数不会在线程间共享，不受内存模型的影响。

java线程间通信由java内存模型控制，决定了一个线程对共享变量的写入何时对另一个线程可见。

线程和主内存的抽象关系：
线程之间的共享变量存储在主内存中，每个线程有一个私有的本地内存，本地内存中存储了该线程以读/写共享变量的副本。

## 重排序

1. 编译器优化的重排序
2. 指令级并行的重排序
3. 内存系统的重排序

## happens-before

happens-before要求前一个操作的执行结果对后一个操作可见。

## 顺序一致性

程序如果