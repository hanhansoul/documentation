# 聚合与继承

## 聚合

一次构建两个项目，而不是到两个模块的目录下分别执行mvn命令。

	<module>

聚合POM的要求：
- 必须指定`<package>`标签的值为pom
- `<modules>`标签中指定需要聚合的模块，每一个module都是一个当前POM的相对目录。

maven首先解析聚合模块的POM、分析要构建的模块、并计算出一个反应堆构建顺序，然后依次构建各个模块。

反应堆是所有模块组成的一个构建结构。

## 继承

POM使用parent元素生命父模块，parent下的子元素groupId、artifactId和version指定了父模块的坐标，是必须的。

### 依赖管理

依赖是会被继承的。

`<dependencyManagement>`既能够让子模块继承到父模块的依赖配置，又能保证子模块依赖使用的灵活性。`<dependencyManagement>`元素下的依赖声明不会引入实际的依赖，不过能够约束dependencies下的依赖使用。

dependencies：即使在子项目中不写该依赖项，那么子项目仍然会从父项目中继承该依赖项（全部继承）。

dependencyManagement：只是声明依赖，并不实现引入，因此子项目需要显示的声明需要用的依赖。如果不在子项目中声明依赖，是不会从父项目中继承下来的；只有在子项目中写了该依赖项，并且没有指定具体版本，才会从父项目中继承该项，并且version和scope都读取自父pom；另外如果子项目中指定了版本号，那么会使用子项目中指定的jar版本。

### 插件管理

pluginManagement：与dependencyManagement功能类似。

## 约定优于配置

超级POM。

## 反应堆

在一个多模块的maven项目中，反应堆是指所有模块组成的一个构建结构。对于单模块的项目，反应堆就是该模块本身，但对于多模块项目来说，反应堆包含了各模块之间继承和依赖关系，从而能够自动计算出合理的模块构建顺序。

### 反应堆构建顺序

maven按序读取POM，如果该POM没有依赖模块，则构建该模块，否则就先构建起依赖模块，一次类推。模块间的依赖关系会将反应堆构成一个有向无环图（DAG）。

### 裁剪反应堆

当仅仅构建完整反应堆中的某些模块时，用户需要实时裁剪反应堆。
