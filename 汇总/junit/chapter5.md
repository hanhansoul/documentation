# 测试覆盖率与开发

## 测量测试覆盖率

### 测试覆盖率简介

测试覆盖率的指标之一是跟踪测试调用了哪些方法。

使用白盒测试你可以获得更高的测试覆盖率．因为你可以访问更多的方法，而且能够控制每个方法的输入以及次级对象的行为。

### Cobertura简介

一个与Junit集成的代码覆盖率测试工具。

### 生成测试覆盖率报告

略。

### 结合黑盒与自盒测试

略。

## 编写可测试的代码

### 公共API是协议

### 减少依赖关系

减少依赖关系的一个解决方法是将你的代码隔阂在两类方法之间，一类是实例化new对象的工厂方法，另一类是为你的应用程序提供逻辑的方法。

### 创建简单的构造函数

### 遵循最少知识原则

迪米特法则，又称为最少知识原则，是一项设计准则，主张一个类只要知道它需要知道的那么多即可。

### 避免隐藏的依赖关系与全局状态

当你提供一个全局对象的访问权限时，你不仅共享了这个对象，同时也共享了这个对象所涉及的任何对象。

### 单例模式的优点和缺点

你可以通过代码覆盖率来确认所有私有方法是否都被测试过，或者你可以修改访问修饰符来打开类，以便显式测试那些方法。

单例模式的一个显著缺点就是它在你的应用程序中引入了全局状态。

### 优先使用通用方法

### 组合优先于继承

### 多态优先于条件语句

## 测试驱动开发

测试驱动开发（TDD）： 测试驱动开发是一项编程实践，它要求开发者只有在自动测试失败的情况下才编写新的代码，并且要消除重复。测试驱动开发的目标是“能正常工作的干净代码”。

### 调整开发周期

TDD开发周期：
- 测试
- 编码
- （重复）
- 提交

### TDD的两个步骤

TDD的核心原则：
1. 在编写新代码之前编写一个失败的自动测试
2. 消除重复